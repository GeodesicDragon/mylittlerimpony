<Patch>

<!--REMINDER TO SELF: The settings window is now in the Defs folder!-->

<Operation Class="PatchOperationSequence">
	<operations>
		<!--PLUSHIES: STUFF REQUIRED-->
		<li Class="XmlExtensions.UseSetting">
			<modId>geodesicdragon.rimpony</modId> <!--String that XML Extensions can identify your mod with-->
			<key>MLRP_PlushiesCloth</key> <!--Key to identify the setting (only used internally, invisible to user)-->
			<defaultValue>300</defaultValue> <!--What you want the default value of the setting to be-->
			<apply>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[@Name="PonyPlushBase"]/costStuffCount</xpath>
					<value>
						<costStuffCount>{MLRP_PlushiesCloth}</costStuffCount>
					</value>
				</Operation>
				
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="PonyPlush_StarlightGlimmer"]/costStuffCount</xpath>
					<value>
						<costStuffCount>{MLRP_PlushiesCloth}</costStuffCount>
					</value>
				</Operation>
			</apply>
		</li>
		
		<!--ELEMENTS OF HARMONY: STUFF REQUIRED-->
		<li Class="XmlExtensions.UseSetting">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_PlushiesCloth</key>
			<apply>
				<Operation Class="XmlExtensions.CreateVariable">
					<value>{MLRP_PlushiesCloth}</value>
					<value2>6</value2>
					<operation>*</operation>
					<storeIn>MLRP_EOH_NewClothValue</storeIn>
					<apply>
						<Operation Class="PatchOperationReplace">
							<xpath>Defs/ThingDef[defName="MLRP_ElementsOfHarmony"]/costStuffCount</xpath>
							<value>
								<costStuffCount>{MLRP_EOH_NewClothValue}</costStuffCount>
							</value>
						</Operation>
					</apply>
				</Operation>
			</apply>
		</li>
		
		<!--KID SIZED PLUSHIES: STUFF REQUIRED-->
		<li Class="XmlExtensions.UseSetting" MayRequire="Ludeon.RimWorld.Biotech">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_PlushiesCloth</key>
			<apply>
				<Operation Class="XmlExtensions.CreateVariable">
					<value>{MLRP_PlushiesCloth}</value>
					<value2>2</value2>
					<operation>/</operation>
					<storeIn>MLRP_ChildPlush_NewStuffValue</storeIn>
					<apply>
						<Operation Class="XmlExtensions.CreateVariable">
							<value>{MLRP_ChildPlush_NewStuffValue}</value>
							<operation>roundup</operation>
							<storeIn>MLRP_DB_ChildPlushStuffValueRounded</storeIn>
							<apply>
								<Operation Class="PatchOperationReplace">
									<xpath>Defs/ThingDef[@Name="PonyPlushChildBase"]/costStuffCount</xpath>
									<value>
										<costStuffCount>{MLRP_DB_ChildPlushStuffValueRounded}</costStuffCount>
									</value>
								</Operation>
								
								<Operation Class="PatchOperationReplace">
									<xpath>Defs/ThingDef[defName="PonyPlush_StarlightGlimmer_Child"]/costStuffCount</xpath>
									<value>
										<costStuffCount>{MLRP_DB_ChildPlushStuffValueRounded}</costStuffCount>
									</value>
								</Operation>
							</apply>
						</Operation>
		
					</apply>
				</Operation>
			</apply>
		</li>
		
		<!--CUTIE MARK CRUSADERS: STUFF REQUIRED-->
		<li Class="XmlExtensions.UseSetting">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_PlushiesCloth</key>
			<apply>
				<Operation Class="XmlExtensions.CreateVariable">
					<value>{MLRP_PlushiesCloth}</value>
					<value2>3</value2>
					<operation>*</operation>
					<storeIn>MLRP_CMC_NewClothValue</storeIn>
					<apply>
						<Operation Class="PatchOperationReplace">
							<xpath>Defs/ThingDef[defName="PonyPlush_CutieMarkCrusaders"]/costStuffCount</xpath>
							<value>
								<costStuffCount>{MLRP_CMC_NewClothValue}</costStuffCount>
							</value>
						</Operation>
					</apply>
				</Operation>
			</apply>
		</li>
		
		<!--PLUSHIES: CRAFTING SKILL REQUIRED-->
		<li Class="XmlExtensions.UseSetting">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_PlushieCraftingSkill</key>
			<defaultValue>5</defaultValue>
			<apply>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[@Name="PonyPlushBase"]/recipeMaker/skillRequirements/Crafting</xpath>
					<value>
						<Crafting>{MLRP_PlushieCraftingSkill}</Crafting>
					</value>
				</Operation>
				
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="PonyPlush_StarlightGlimmer"]/recipeMaker/skillRequirements/Crafting</xpath>
					<value>
						<Crafting>{MLRP_PlushieCraftingSkill}</Crafting>
					</value>
				</Operation>
				
				<Operation Class="PatchOperationReplace" MayRequire="Ludeon.RimWorld.Biotech">
					<xpath>Defs/ThingDef[defName="PonyPlush_StarlightGlimmer_Child"]/recipeMaker/skillRequirements/Crafting</xpath>
					<value>
						<Crafting>{MLRP_PlushieCraftingSkill}</Crafting>
					</value>
				</Operation>
			</apply>
		</li>

		<!--PLUSHIES: TAINTED ON DEATH-->
		<li Class="XmlExtensions.OptionalPatch">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_PlushiesTaintedOnDeath</key>
			<defaultValue>true</defaultValue>
			<caseTrue>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[@Name="PonyPlushBase"]/apparel/careIfWornByCorpse</xpath>
					<value>
						<careIfWornByCorpse>true</careIfWornByCorpse>
					</value>
				</Operation>
				
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="PonyPlush_StarlightGlimmer"]/apparel/careIfWornByCorpse</xpath>
					<value>
						<careIfWornByCorpse>true</careIfWornByCorpse>
					</value>
				</Operation>
				
				<Operation Class="PatchOperationReplace" MayRequire="Ludeon.RimWorld.Biotech">
					<xpath>Defs/ThingDef[defName="PonyPlush_StarlightGlimmer_Child"]/apparel/careIfWornByCorpse</xpath>
					<value>
						<careIfWornByCorpse>true</careIfWornByCorpse>
					</value>
				</Operation>
			</caseTrue>
			<caseFalse>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[@Name="PonyPlushBase"]/apparel/careIfWornByCorpse</xpath>
					<value>
						<careIfWornByCorpse>false</careIfWornByCorpse>
					</value>
				</Operation>
				
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="PonyPlush_StarlightGlimmer"]/apparel/careIfWornByCorpse</xpath>
					<value>
						<careIfWornByCorpse>false</careIfWornByCorpse>
					</value>
				</Operation>
				
				<Operation Class="PatchOperationReplace" MayRequire="Ludeon.RimWorld.Biotech">
					<xpath>Defs/ThingDef[defName="PonyPlush_StarlightGlimmer_Child"]/apparel/careIfWornByCorpse</xpath>
					<value>
						<careIfWornByCorpse>false</careIfWornByCorpse>
					</value>
				</Operation>
			</caseFalse>
		</li>
		
		<!--PLUSHIES: PIPP IS SHORT-->
		<li Class="XmlExtensions.OptionalPatch" MayRequire="Dubwise.DubsBadHygiene">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_DubsBadHygiene_PippIsShort</key>
			<defaultValue>true</defaultValue>
			<caseTrue>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="PonyPlush_PippPetals"]/graphicData/drawSize</xpath>
					<value>
						<drawSize>0.5</drawSize>
					</value>
				</Operation>
			</caseTrue>
			<caseFalse>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="PonyPlush_PippPetals"]/graphicData/drawSize</xpath>
					<value>
						<drawSize>1</drawSize>
					</value>
				</Operation>
			</caseFalse>
		</li>

		<!--BRONY TRAIT COMMONALITY-->
		<li Class="XmlExtensions.UseSetting">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_BronyTraitCommonality</key>
			<defaultValue>0.1</defaultValue>
			<apply>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/TraitDef[defName="MLRP_BronyTrait"]/commonality</xpath>
					<value>
						<commonality>{MLRP_BronyTraitCommonality}</commonality>
					</value>
				</Operation>
			</apply>
		</li>

		<!--ANTI BRONY TRAIT COMMONALITY-->
		<li Class="XmlExtensions.UseSetting">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_AntiBronyTraitCommonality</key>
			<defaultValue>0.2</defaultValue>
			<apply>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/TraitDef[defName="MLRP_AntiBronyTrait"]/commonality</xpath>
					<value>
						<commonality>{MLRP_AntiBronyTraitCommonality}</commonality>
					</value>
				</Operation>
			</apply>
		</li>
		
		<!--EVIL SISTERS: STUFF REQUIRED-->
		<li Class="XmlExtensions.UseSetting">
			<modId>geodesicdragon.rimpony</modId> <!--String that XML Extensions can identify your mod with-->
			<key>MLRP_EvilSistersStuffRequired</key> <!--Key to identify the setting (only used internally, invisible to user)-->
			<defaultValue>750</defaultValue> <!--What you want the default value of the setting to be-->
			<apply>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="MLRP_NightmareMoon" or defName="MLRP_Daybreaker"]/costStuffCount</xpath>
					<value>
						<costStuffCount>{MLRP_EvilSistersStuffRequired}</costStuffCount>
					</value>
				</Operation>
			</apply>
		</li>		

		<!--DISCORD LAMP: STUFF REQUIRED-->
		<li Class="XmlExtensions.UseSetting">
			<modId>geodesicdragon.rimpony</modId> <!--String that XML Extensions can identify your mod with-->
			<key>MLRP_DiscordLampStuffRequired</key> <!--Key to identify the setting (only used internally, invisible to user)-->
			<defaultValue>300</defaultValue> <!--What you want the default value of the setting to be-->
			<apply>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[@Name="DiscordLampBase"]/costStuffCount</xpath>
					<value>
						<costStuffCount>{MLRP_DiscordLampStuffRequired}</costStuffCount>
					</value>
				</Operation>
			</apply>
		</li>
		
		<!--DISCORD LAMP: BRIGHTNESS-->
		<li Class="XmlExtensions.UseSetting">
			<modId>geodesicdragon.rimpony</modId> <!--String that XML Extensions can identify your mod with-->
			<key>MLRP_DiscordLampBrightness</key> <!--Key to identify the setting (only used internally, invisible to user)-->
			<defaultValue>8</defaultValue> <!--What you want the default value of the setting to be-->
			<apply>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[@Name="DiscordLampBase"]/comps</xpath>
					<value>
						<comps>
							<li Class="CompProperties_Glower">
								<glowRadius>{MLRP_DiscordLampBrightness}</glowRadius>
							</li>
						</comps>
					</value>
				</Operation>
			</apply>
		</li>
		
		<!--SCREWBALL: STUFF REQUIRED-->
		<li Class="XmlExtensions.UseSetting">
			<modId>geodesicdragon.rimpony</modId> <!--String that XML Extensions can identify your mod with-->
			<key>MLRP_ScrewballStuffRequired</key> <!--Key to identify the setting (only used internally, invisible to user)-->
			<defaultValue>300</defaultValue> <!--What you want the default value of the setting to be-->
			<apply>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="MLRP_ScrewballGenerator"]/costStuffCount</xpath>
					<value>
						<costStuffCount>{MLRP_ScrewballStuffRequired}</costStuffCount>
					</value>
				</Operation>
			</apply>
		</li>
		
		<!--SWEETIE BOT: RANGE-->
		<li Class="XmlExtensions.UseSetting">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_SweetieBotWeaponRange</key>
			<defaultValue>46</defaultValue>
			<apply>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="MLRP_SweetieBotTurret"]/verbs/li/range</xpath>
					<value>
						<range>{MLRP_SweetieBotWeaponRange}</range>
					</value>
				</Operation>
			</apply>
		</li>

		<!--SWEETIE BOT: TOUCH ACCURACY-->
		<li Class="XmlExtensions.UseSetting">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_SweetieBotAccuracyTouch</key>
			<defaultValue>0.3</defaultValue>
			<apply>
				<Operation Class="XmlExtensions.FindMod">
					<mods>
						<li>CETeam.CombatExtended</li>
					</mods>
					<packageId>true</packageId>
					<logic>and</logic>
					<caseTrue> 
						<Operation Class="PatchOperationReplace">
							<xpath>Defs/ThingDef[defName="MLRP_Turret_SweetieBot"]/statBases/AimingAccuracy</xpath>
							<value>
								<AimingAccuracy>{MLRP_SweetieBotAccuracyTouch}</AimingAccuracy>
							</value>
						</Operation>
					</caseTrue>
					<caseFalse> 
						<Operation Class="PatchOperationReplace">
							<xpath>Defs/ThingDef[defName="MLRP_SweetieBotTurret"]/statBases/AccuracyTouch</xpath>
							<value>
								<AccuracyTouch>{MLRP_SweetieBotAccuracyTouch}</AccuracyTouch>
							</value>
						</Operation>
					</caseFalse>
				</Operation>
			</apply>
		</li>

		<!--SWEETIE BOT: SHORT RANGE ACCURACY-->
		<li Class="XmlExtensions.UseSetting">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_SweetieBotAccuracyShort</key>
			<defaultValue>0.4</defaultValue>
			<apply>
				<Operation Class="XmlExtensions.FindMod">
					<mods>
						<li>CETeam.CombatExtended</li>
					</mods>
					<packageId>true</packageId>
					<logic>and</logic>
					<caseTrue> 
						<Operation Class="PatchOperationReplace">
							<xpath>Defs/ThingDef[defName="MLRP_Turret_SweetieBot"]/statBases/AimingAccuracy</xpath>
							<value>
								<AimingAccuracy>{MLRP_SweetieBotAccuracyShort}</AimingAccuracy>
							</value>
						</Operation>
					</caseTrue>
					<caseFalse> 
						<Operation Class="PatchOperationReplace">
							<xpath>Defs/ThingDef[defName="MLRP_SweetieBotTurret"]/statBases/AccuracyShort</xpath>
							<value>
								<AccuracyShort>{MLRP_SweetieBotAccuracyShort}</AccuracyShort>
							</value>
						</Operation>
					</caseFalse>
				</Operation>
			</apply>
		</li>

		<!--SWEETIE BOT: MEDIUM RANGE ACCURACY-->

		<li Class="XmlExtensions.UseSetting">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_SweetieBotAccuracyMedium</key>
			<defaultValue>0.8</defaultValue>
			<apply>
				<Operation Class="XmlExtensions.FindMod">
					<mods>
						<li>CETeam.CombatExtended</li>
					</mods>
					<packageId>true</packageId>
					<logic>and</logic>
					<caseTrue> 
						<Operation Class="PatchOperationReplace">
							<xpath>Defs/ThingDef[defName="MLRP_Turret_SweetieBot"]/statBases/AimingAccuracy</xpath>
							<value>
								<AimingAccuracy>{MLRP_SweetieBotAccuracyMedium}</AimingAccuracy>
							</value>
						</Operation>
					</caseTrue>
					<caseFalse> 
						<Operation Class="PatchOperationReplace">
							<xpath>Defs/ThingDef[defName="MLRP_SweetieBotTurret"]/statBases/AccuracyMedium</xpath>
							<value>
								<AccuracyMedium>{MLRP_SweetieBotAccuracyMedium}</AccuracyMedium>
							</value>
						</Operation>
					</caseFalse>
				</Operation>
			</apply>
		</li>

		<!--SWEETIE BOT: LONG RANGE ACCURACY-->
		<li Class="XmlExtensions.UseSetting">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_SweetieBotAccuracyLong</key>
			<defaultValue>0.8</defaultValue>
			<apply>
				<Operation Class="XmlExtensions.FindMod">
					<mods>
						<li>CETeam.CombatExtended</li>
					</mods>
					<packageId>true</packageId>
					<logic>and</logic>
					<caseTrue> 
						<Operation Class="PatchOperationReplace">
							<xpath>Defs/ThingDef[defName="MLRP_Turret_SweetieBot"]/statBases/AimingAccuracy</xpath>
							<value>
								<AimingAccuracy>{MLRP_SweetieBotAccuracyLong}</AimingAccuracy>
							</value>
						</Operation>
					</caseTrue>
					<caseFalse> 
						<Operation Class="PatchOperationReplace">
							<xpath>Defs/ThingDef[defName="MLRP_SweetieBotTurret"]/statBases/AccuracyLong</xpath>
							<value>
								<AccuracyLong>{MLRP_SweetieBotAccuracyLong}</AccuracyLong>
							</value>
						</Operation>
						
						<Operation Class="PatchOperationReplace">
							<xpath>Defs/ThingDef[defName="MLRP_Turret_SweetieBot"]/statBases/ShootingAccuracyTurret</xpath>
							<value>
								<ShootingAccuracyTurret>{MLRP_SweetieBotAccuracyLong}</ShootingAccuracyTurret>
							</value>
						</Operation>
					</caseFalse>
				</Operation>
			</apply>
		</li>

		<!--NURSE REDHEART: SPAWN GLITTERWORLD MEDICINE INSTEAD OF INDUSTRIAL-->
		<li Class="XmlExtensions.OptionalPatch">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_NurseRedheartSpawnGlitterworldMedicine</key>
			<defaultValue>false</defaultValue>
			<caseTrue>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="MLRP_NurseRedheart"]/comps/li[@Class="CompProperties_Spawner"]/thingToSpawn</xpath>
					<value>
						<thingToSpawn>MedicineUltratech</thingToSpawn>
					</value>
				</Operation>
			</caseTrue>
			<caseFalse>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="MLRP_NurseRedheart"]/comps/li[@Class="CompProperties_Spawner"]/thingToSpawn</xpath>
					<value>
						<thingToSpawn>MedicineIndustrial</thingToSpawn>
					</value>
				</Operation>
			</caseFalse>
		</li>

		<!--NURSE REDHEART: MEDICINE SPAWN AMOUNT-->
		<li Class="XmlExtensions.UseSetting">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_NurseRedheartMedicineSpawnAmount</key>
			<defaultValue>5</defaultValue>
			<apply>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="MLRP_NurseRedheart"]/comps/li[@Class="CompProperties_Spawner"]/spawnCount</xpath>
					<value>
						<spawnCount>{MLRP_NurseRedheartMedicineSpawnAmount}</spawnCount>
					</value>
				</Operation>
			</apply>
		</li>

		<!--NURSE REDHEART: MEDICINE SPAWN TIME-->
		<li Class="XmlExtensions.UseSetting">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_NurseRedheartMedicineSpawnTime</key>
			<defaultValue>10</defaultValue>
			<apply>
				<Operation Class="XmlExtensions.CreateVariable">
					<value>{MLRP_NurseRedheartMedicineSpawnTime}</value>
					<value2>60000</value2>
					<operation>*</operation>
					<storeIn>MLRP_NurseRedheartMedicineSpawnTicks</storeIn>
					<apply>
						<Operation Class="PatchOperationReplace">
							<xpath>Defs/ThingDef[defName="MLRP_NurseRedheart"]/comps/li[@Class="CompProperties_Spawner"]/spawnIntervalRange</xpath>
							<value>
								<spawnIntervalRange><min>{MLRP_NurseRedheartMedicineSpawnTicks}</min><max>{MLRP_NurseRedheartMedicineSpawnTicks}</max></spawnIntervalRange>
							</value>
						</Operation>
					</apply>
				</Operation>
			</apply>
		</li>

		<!--NURSE REDHEART: REPLACE DESCRIPTION-->
		<li Class="XmlExtensions.UseSettings">
			<modId>geodesicdragon.rimpony</modId>
			<keys>
				<li>MLRP_NurseRedheartMedicineSpawnAmount</li>
				<li>MLRP_NurseRedheartMedicineSpawnTime</li>
			</keys>
			<defaultValues>
				<li>5</li>
				<li>10</li>
			</defaultValues>
			<brackets>{}</brackets>    
			<apply>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="MLRP_NurseRedheart"]/description</xpath>
					<value>
						<description>As a nurse, Redheart has seen it all; she knows that being prepared for any eventuality is of vital importance.\n\nGenerates {MLRP_NurseRedheartMedicineSpawnAmount} medicine every {MLRP_NurseRedheartMedicineSpawnTime} day(s).</description>
					</value>
				</Operation>
			</apply>
		</li>
			
		<!--AGGRO TURRETS: HEALTH-->
		<li Class="XmlExtensions.UseSetting">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_ZephyrBreezeHealth</key>
			<defaultValue>1000</defaultValue>
			<apply>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="MLRP_Mudbriar" or defName="MLRP_QuibblePants" or defName="MLRP_ZephyrBreeze"]/statBases/MaxHitPoints</xpath>
					<value>
						<MaxHitPoints>{MLRP_ZephyrBreezeHealth}</MaxHitPoints>
					</value>
				</Operation>
			</apply>
		</li>
		
		<!--SSCS6K: BEER SPAWN AMOUNT-->
		<li Class="XmlExtensions.UseSetting">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_SSCS6KBeerSpawnAmount</key>
			<defaultValue>30</defaultValue>
			<apply>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="MLRP_SSCS6K"]/comps/li[@Class="CompProperties_Spawner"]/spawnCount</xpath>
					<value>
						<spawnCount>{MLRP_SSCS6KBeerSpawnAmount}</spawnCount>
					</value>
				</Operation>
			</apply>
		</li>

		<!--SSCS6K: BEER SPAWN TIME-->
		<li Class="XmlExtensions.UseSetting">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_SSCS6KBeerSpawnTime</key>
			<defaultValue>30</defaultValue>
			<apply>
				<Operation Class="XmlExtensions.CreateVariable">
					<value>{MLRP_SSCS6KBeerSpawnTime}</value>
					<value2>60000</value2>
					<operation>*</operation>
					<storeIn>MLRP_MLRP_SSCS6KBeerSpawnTicks</storeIn>
					<apply>
						<Operation Class="PatchOperationReplace">
							<xpath>Defs/ThingDef[defName="MLRP_SSCS6K"]/comps/li[@Class="CompProperties_Spawner"]/spawnIntervalRange</xpath>
							<value>
								<spawnIntervalRange><min>{MLRP_MLRP_SSCS6KBeerSpawnTicks}</min><max>{MLRP_MLRP_SSCS6KBeerSpawnTicks}</max></spawnIntervalRange>
							</value>
						</Operation>
					</apply>
				</Operation>
			</apply>
		</li>
		
		<!--SSCS6K: REPLACE DESCRIPTION-->
		<li Class="XmlExtensions.UseSettings">
			<modId>geodesicdragon.rimpony</modId>
			<keys>
				<li>MLRP_SSCS6KBeerSpawnAmount</li>
				<li>MLRP_SSCS6KBeerSpawnTime</li>
			</keys>
			<defaultValues>
				<li>30</li>
				<li>30</li>
			</defaultValues>
			<brackets>{}</brackets>    
			<apply>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="MLRP_SSCS6K"]/description</xpath>
					<value>
						<description>Unlike when Flim and Flam were using it, the Super Speedy Cider Squeezy 6000 will produce something just as good as cider, provided it has enough power.\n\nGenerates {MLRP_SSCS6KBeerSpawnAmount} Beer every {MLRP_SSCS6KBeerSpawnTime} days.</description>
					</value>
				</Operation>
			</apply>
		</li>
		
		<!--DAYBREAKER STATUE: REGULAR CHEMFUEL REQUIRED-->
		<li Class="XmlExtensions.UseSetting">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_DaybreakerChemfuel</key>
			<defaultValue>50</defaultValue>
			<apply>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/RecipeDef[@Name="DaybreakerRecipes_RegularChemfuel"]/ingredients/li/count</xpath>
					<value>
						<count>{MLRP_DaybreakerChemfuel}</count>
					</value>
				</Operation>
			</apply>
		</li>

		<!--DERPY HOOVES: MASS CAPACITY-->
		<li Class="XmlExtensions.UseSetting">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_DerpyHoovesMassCapacity</key>
			<defaultValue>300</defaultValue>
			<apply>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="MLRP_DerpyHooves"]/comps/li[@Class="CompProperties_Transporter"]/massCapacity</xpath>
					<value>
						<massCapacity>{MLRP_DerpyHoovesMassCapacity}</massCapacity>
					</value>
				</Operation>
			
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="MLRP_DerpyHooves"]/costStuffCount</xpath>
					<value>
						<costStuffCount>{MLRP_DerpyHoovesMassCapacity}</costStuffCount>
					</value>
				</Operation>
			</apply>
		</li>
		
		<!--DAYBREAKER STATUE: DOUBLE CHEMFUEL AMOUNT-->
		<li Class="XmlExtensions.UseSetting">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_DaybreakerChemfuel</key>
			<apply>
				<Operation Class="XmlExtensions.CreateVariable">
					<value>{MLRP_DaybreakerChemfuel}</value>
					<value2>2</value2>
					<operation>*</operation>
					<storeIn>MLRP_DB_DoubleChemfuelValue</storeIn>
					<apply>
						<Operation Class="PatchOperationReplace">
							<xpath>Defs/RecipeDef[@Name="DaybreakerRecipes_DoubleChemfuel"]/ingredients/li/count</xpath>
							<value>
								<count>{MLRP_DB_DoubleChemfuelValue}</count>
							</value>
						</Operation>
					</apply>
				</Operation>
			</apply>
		</li>
		
		<!--DAYBREAKER STATUE: TRIPLE CHEMFUEL AMOUNT-->
		<li Class="XmlExtensions.UseSetting">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_DaybreakerChemfuel</key>
			<apply>
				<Operation Class="XmlExtensions.CreateVariable">
					<value>{MLRP_DaybreakerChemfuel}</value>
					<value2>3</value2>
					<operation>*</operation>
					<storeIn>MLRP_DB_TripleChemfuelValue</storeIn>
					<apply>
						<Operation Class="PatchOperationReplace">
							<xpath>Defs/RecipeDef[@Name="DaybreakerRecipes_TripleChemfuel"]/ingredients/li/count</xpath>
							<value>
								<count>{MLRP_DB_TripleChemfuelValue}</count>
							</value>
						</Operation>
					</apply>
				</Operation>
			</apply>
		</li>

		<!--DAYBREAKER STATUE: HALF CHEMFUEL AMOUNT-->
		<li Class="XmlExtensions.UseSetting">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_DaybreakerChemfuel</key>
			<apply>
				<Operation Class="XmlExtensions.CreateVariable">
					<value>{MLRP_DaybreakerChemfuel}</value>
					<value2>2</value2>
					<operation>/</operation>
					<storeIn>MLRP_DB_HalfChemfuelValue</storeIn>
					<apply>
						<Operation Class="XmlExtensions.CreateVariable">
							<value>{MLRP_DB_HalfChemfuelValue}</value>
							<operation>roundup</operation>
							<storeIn>MLRP_DB_HalfChemfuelValueRounded</storeIn>
							<apply>
								<Operation Class="PatchOperationReplace">
									<xpath>Defs/RecipeDef[@Name="DaybreakerRecipes_HalfChemfuel"]/ingredients/li/count</xpath>
									<value>
										<count>{MLRP_DB_HalfChemfuelValueRounded}</count>
									</value>
								</Operation>
							</apply>
						</Operation>
					</apply>
				</Operation>
			</apply>
		</li>
		
		<!--DAYBREAKER STATUE: QUADRUPLE CHEMFUEL AMOUNT-->
		<li Class="XmlExtensions.UseSetting" MayRequire="Ludeon.RimWorld.Anomaly">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_DaybreakerChemfuel</key>
			<apply>
				<Operation Class="XmlExtensions.CreateVariable">
					<value>{MLRP_DaybreakerChemfuel}</value>
					<value2>4</value2>
					<operation>*</operation>
					<storeIn>MLRP_DB_QuadrupleChemfuelValue</storeIn>
					<apply>
						<Operation Class="PatchOperationReplace">
							<xpath>Defs/RecipeDef[@Name="DaybreakerRecipes_QuadrupleChemfuel"]/ingredients/li/count</xpath>
							<value>
								<count>{MLRP_DB_QuadrupleChemfuelValue}</count>
							</value>
						</Operation>
					</apply>
				</Operation>
			</apply>
		</li>
		
		<!--DAYBREAKER STATUE: QUINTUPLE CHEMFUEL AMOUNT-->
		<li Class="XmlExtensions.UseSetting" MayRequire="Ludeon.RimWorld.Anomaly">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_DaybreakerChemfuel</key>
			<apply>
				<Operation Class="XmlExtensions.CreateVariable">
					<value>{MLRP_DaybreakerChemfuel}</value>
					<value2>5</value2>
					<operation>*</operation>
					<storeIn>MLRP_DB_QuintupleChemfuelValue</storeIn>
					<apply>
						<Operation Class="PatchOperationReplace">
							<xpath>Defs/RecipeDef[@Name="DaybreakerRecipes_QuintupleChemfuel"]/ingredients/li/count</xpath>
							<value>
								<count>{MLRP_DB_QuintupleChemfuelValue}</count>
							</value>
						</Operation>
					</apply>
				</Operation>
			</apply>
		</li>
		
		<!--RAINBOW DASH CHILD PLUSHIE: SAME BONUSES AS ADULT VERSION-->
		<li Class="XmlExtensions.OptionalPatch" MayRequire="Ludeon.RimWorld.Biotech">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_RainbowDashChildPlushUsesAdultStats</key>
			<defaultValue>false</defaultValue>
			<caseTrue>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="PonyPlush_RainbowDash_Child"]/equippedStatOffsets</xpath>
					<value>
						<equippedStatOffsets>
							<MoveSpeed>1</MoveSpeed>
							<MeleeHitChance>5</MeleeHitChance>
							<ShootingAccuracyPawn>5</ShootingAccuracyPawn>
							<ReloadSpeed MayRequire="CETeam.CombatExtended">0.05</ReloadSpeed>
							<NightVisionEfficiency_Apparel MayRequire="CETeam.CombatExtended">0.1</NightVisionEfficiency_Apparel>
							<Suppressability MayRequire="CETeam.CombatExtended">-0.05</Suppressability>
						</equippedStatOffsets>
					</value>
				</Operation>
				
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="PonyPlush_RainbowDash_Child"]/description</xpath>
					<value>
						<description>It goes without saying that Rainbow 'Danger' Dash is the very ponification of speed.\n\nCarrying her makes you feel fast, as well as more confident in your combat abilities.</description>
					</value>
				</Operation>
			</caseTrue>
			<caseFalse>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="PonyPlush_RainbowDash_Child"]/equippedStatOffsets</xpath>
					<value>
						<equippedStatOffsets>
							<MoveSpeed>2</MoveSpeed>
						</equippedStatOffsets>
					</value>
				</Operation>
				
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="PonyPlush_RainbowDash_Child"]/description</xpath>
					<value>
						<description>It goes without saying that Rainbow 'Danger' Dash is the very ponification of speed.\n\nCarrying her makes you feel faster on your feet.</description>
					</value>
				</Operation>
			</caseFalse>
		</li>
		
		<!--ROYALTY: PATCH ANIMA TREE-->
		<li Class="XmlExtensions.OptionalPatch" MayRequire="Ludeon.RimWorld.Royalty">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_TurnAnimaTreeIntoTreeOfHarmony</key>
			<defaultValue>true</defaultValue>
			<caseTrue>
				<Operation Class="PatchOperationSequence">
					<operations>
					
						<!--ANIMA TREE-->
					
						<li Class="PatchOperationReplace">
							<xpath>/Defs/ThingDef[defName="Plant_TreeAnima"]/label</xpath>
							<value>
								<label>Tree of Harmony</label>
							</value>
						</li>
						
						<li Class="PatchOperationReplace">
							<xpath>/Defs/ThingDef[defName="Plant_TreeAnima"]/description</xpath>
							<value>
								<description>The Tree of Harmony is a magical tree that once held the Elements of Harmony. Nobody knows how it ended up on the rim, but many people suspect that science was involved.\n\nIf a person (psycaster or not) meditates near the tree, it will grow harmony grass around its base. Once enough grass is grown, it becomes possible to carry out a psychic linking ritual with the tree and upgrade a person's psychic powers. Only tribal peoples know the secret of this ritual. Tribal psycasters are also able to draw psyfocus from the Tree of Harmony while meditating at it.\n\nThe tree's psychic properties are weakened if artificial structures are placed nearby. They refuse to be caged or studied, and must remain part of nature.\n\nMost tribes believe that these trees are not simply trees, but are rather the physical extremities of a single world spirit, while bronies believe them to be a physical extension of their beliefs.</description>
							</value>
						</li>
						
						<li Class="PatchOperationReplace">
							<xpath>/Defs/ThingDef[defName="Plant_TreeAnima"]/comps/li[4]/enoughPlantsLetterLabel</xpath>
							<value>
								<enoughPlantsLetterLabel>About: Linking with the Tree of Harmony</enoughPlantsLetterLabel>
							</value>
						</li>
						
						<li Class="PatchOperationReplace">
							<xpath>/Defs/ThingDef[defName="Plant_TreeAnima"]/comps/li[4]/enoughPlantsLetterText</xpath>
							<value>
								<enoughPlantsLetterText>The Tree of Harmony now has {0} harmony grass around it. This is enough for a tribal person to begin their first linking ritual!\n\nThe linking ritual gives a level of psylink and the ability to use psychic powers. Upgrading to a higher level requires 20 grass.\n\nThe harmony grass requirements for linking rituals to upgrade psycasters are:\n\n{1}\n\nNote: Only those with the nature focus type can meditate to or link with the Tree of Harmony. You can see a person's focus types by looking at their info card with the 'i' button.</enoughPlantsLetterText>
							</value>
						</li>
						
						<li Class="PatchOperationReplace">
							<xpath>/Defs/ThingDef[defName="Plant_TreeAnima"]/graphicData/texPath</xpath>
							<value>
								<texPath>Things/Plant/TreeOfHarmony</texPath>
							</value>
						</li>
						
						<li Class="PatchOperationReplace">
							<xpath>/Defs/ThingDef[defName="Plant_TreeAnima"]/plant/immatureGraphicPath</xpath>
							<value>
								<immatureGraphicPath>Things/Plant/TreeOfHarmony_Immature</immatureGraphicPath>
							</value>
						</li>
						
						<li Class="PatchOperationReplace">
							<xpath>/Defs/ThingDef[defName="Plant_TreeAnima"]/graphicData/graphicClass</xpath>
							<value>
								<graphicClass>Graphic_Single</graphicClass>
							</value>
						</li>
						
						<li Class="PatchOperationAdd">
							<xpath>/Defs/ThingDef[defName="Plant_TreeAnima"]/graphicData</xpath>
							<value>
								<drawSize>(2,2)</drawSize>
							</value>
						</li>
								
						<li Class="PatchOperationReplace">
							<xpath>/Defs/ThingDef[defName="Plant_TreeAnima"]/comps/li[5]/message</xpath>
							<value>
								<message>The Tree of Harmony has died and emitted a disturbing psychic scream.</message>
							</value>
						</li>
						
						<!--ANIMA GRASS-->
						
						<li Class="PatchOperationReplace">
							<xpath>/Defs/ThingDef[defName="Plant_GrassAnima"]/label</xpath>
							<value>
								<label>harmony grass</label>
							</value>
						</li>
						
						<li Class="PatchOperationReplace">
							<xpath>/Defs/ThingDef[defName="Plant_GrassAnima"]/description</xpath>
							<value>
								<description>A grass infused with luminous microorganisms. Tribal peoples find that this grass grows around the base of the Tree of Harmony as they meditate. It seems to reflect some kind of strengthening of the tree's psychic power.\n\nAnimals refuse to eat anima grass, which tribal stories say is done out of respect.\n\nBronies believe that the grass is a physical extension of the tree's power, and that it holds the key to opening a link to Equestria, but the grass degenerates into normal plant matter when observed too closely.</description>
							</value>
						</li>
					</operations>
				</Operation>
			</caseTrue>
			<caseFalse>
				<!--If the option is false, do nothing.-->
			</caseFalse>
		</li>
		
		<!--IDEOLOGY: HARMONY PRECEPT PROVIDES OLD BONUSES-->
		<li Class="XmlExtensions.OptionalPatch" MayRequire="Ludeon.RimWorld.Ideology">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_HarmonyPreceptProvidesIncreasedBonuses</key>
			<defaultValue>false</defaultValue>
			<caseTrue>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/PreceptDef[defName="MLRP_HarmonyPrecept"]/statOffsets</xpath>
					<value>
						<statOffsets>
							<PlantWorkSpeed>0.25</PlantWorkSpeed>
							<PlantHarvestYield>0.25</PlantHarvestYield>
							<TameAnimalChance>0.25</TameAnimalChance>
							<TrainAnimalChance>0.25</TrainAnimalChance>
							<AnimalGatherSpeed>0.25</AnimalGatherSpeed>
							<AnimalGatherYield>0.25</AnimalGatherYield>
							<SocialImpact>0.25</SocialImpact>
							<MoveSpeed>1</MoveSpeed>
							<MeleeHitChance>5</MeleeHitChance>
							<ShootingAccuracyPawn>5</ShootingAccuracyPawn>
							<TradePriceImprovement>0.25</TradePriceImprovement>
							<ResearchSpeed>0.25</ResearchSpeed>
							<HackingSpeed>0.25</HackingSpeed>
						</statOffsets>
					</value>
				</Operation>
			</caseTrue>
			<caseFalse>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/PreceptDef[defName="MLRP_HarmonyPrecept"]/statOffsets</xpath>
					<value>
						<statOffsets>
							<PlantWorkSpeed>0.1</PlantWorkSpeed>
							<PlantHarvestYield>0.1</PlantHarvestYield>
							<TameAnimalChance>0.1</TameAnimalChance>
							<TrainAnimalChance>0.1</TrainAnimalChance>
							<AnimalGatherSpeed>0.1</AnimalGatherSpeed>
							<AnimalGatherYield>0.1</AnimalGatherYield>
							<SocialImpact>0.1</SocialImpact>
							<MoveSpeed>0.5</MoveSpeed>
							<MeleeHitChance>1</MeleeHitChance>
							<ShootingAccuracyPawn>1</ShootingAccuracyPawn>
							<TradePriceImprovement>0.1</TradePriceImprovement>
							<ResearchSpeed>0.1</ResearchSpeed>
							<HackingSpeed>0.1</HackingSpeed>
						</statOffsets>
					</value>
				</Operation>
			</caseFalse>
		</li>
		
		<!--BIOTECH: SWEETIE BOT MECHANOIDS APPEAR IN MECHANOID CLUSTERS-->
		<li Class="XmlExtensions.OptionalPatch" MayRequire="Ludeon.RimWorld.Biotech">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_SweetieBotMechanoidsAppearInMechClusters</key>
			<defaultValue>true</defaultValue>
			<caseTrue>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/PawnKindDef[defName="MLRP_SweetieBotMech"]/allowInMechClusters</xpath>
					<value>
						<allowInMechClusters>true</allowInMechClusters>
					</value>
				</Operation>
			</caseTrue>
			<caseFalse>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/PawnKindDef[defName="MLRP_SweetieBotMech"]/allowInMechClusters</xpath>
					<value>
						<allowInMechClusters>false</allowInMechClusters>
					</value>
				</Operation>
			</caseFalse>
		</li>
		
		<!--BIOTECH: SWEETIE BOT MECHANOIDS ARE QUIET-->
		<li Class="XmlExtensions.OptionalPatch" MayRequire="Ludeon.RimWorld.Biotech">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_SweetieBotMechanoidsAreQuiet</key>
			<defaultValue>false</defaultValue>
			<caseTrue>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/SoundDef[defName="SweetieBotMech_Call"]/subSounds/li/volumeRange</xpath>
					<value>
						<volumeRange>
							<min>0</min>        
							<max>0</max>
						</volumeRange>
					</value>
				</Operation>
			</caseTrue>
			<caseFalse>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/SoundDef[defName="SweetieBotMech_Call"]/subSounds/li/volumeRange</xpath>
					<value>
						<volumeRange>
							<min>50</min>        
							<max>50</max>
						</volumeRange>
					</value>
				</Operation>
			</caseFalse>
		</li>
		
		<!--MEDPOD: PREVENT PODS FROM HEALING THE CUTIE POX-->
		<li Class="XmlExtensions.OptionalPatch" MayRequire="sumghai.medpod">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_MedPodsDoNotCureCutiePox</key>
			<defaultValue>True</defaultValue>
			<caseTrue>
				<Operation Class="PatchOperationConditional">
					<xpath>/Defs/ThingDef[@Name="MedPodBedBase"]/comps/li[@Class="MedPod.CompProperties_TreatmentRestrictions"]/neverTreatableHediffs/li[@Name="MLRP_MedPodCutiePox"]</xpath>
					<nomatch Class="PatchOperationAdd">
						<xpath>/Defs/ThingDef[@Name="MedPodBedBase"]/comps/li[@Class="MedPod.CompProperties_TreatmentRestrictions"]/neverTreatableHediffs</xpath>
						<value>
							<li Name="MLRP_MedPodCutiePox">MLRP_CutiePox</li>
						</value>
					</nomatch>
				</Operation>
			</caseTrue>
			<caseFalse>
				<Operation Class="PatchOperationConditional">
					<xpath>/Defs/ThingDef[@Name="MedPodBedBase"]/comps/li[@Class="MedPod.CompProperties_TreatmentRestrictions"]/neverTreatableHediffs/li[@Name="MLRP_MedPodCutiePox"]</xpath>
					<match Class="PatchOperationRemove">
						<xpath>/Defs/ThingDef[@Name="MedPodBedBase"]/comps/li[@Class="MedPod.CompProperties_TreatmentRestrictions"]/neverTreatableHediffs/li[@Name="MLRP_MedPodCutiePox"]</xpath>
					</match>
				</Operation>
			</caseFalse>
		</li>
			
		<!--RAINBOW LASER: ELEMENTS OF HARMONY REQUIRED-->
		<li Class="XmlExtensions.OptionalPatch">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_RainbowLaserRequiresEOH</key>
			<defaultValue>true</defaultValue>
			<caseTrue>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="MLRP_ElementsOfHarmonyWeaponised"]/costList</xpath>
					<value>
						<costList>
							<Plasteel>100</Plasteel>
							<Gold>5</Gold>
							<MLRP_ElementsOfHarmony>1</MLRP_ElementsOfHarmony>
						</costList>
					</value>
				</Operation>
			</caseTrue>
			<caseFalse>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="MLRP_ElementsOfHarmonyWeaponised"]/costList</xpath>
					<value>
						<costList>
							<Plasteel>100</Plasteel>
							<Gold>5</Gold>
							<ComponentSpacer>3</ComponentSpacer>
						</costList>
					</value>
				</Operation>
			</caseFalse>
		</li>
		
		<!--ANOMALY: STUFF REQUIRED TO BUILD THINGPONE-->
		<li Class="XmlExtensions.UseSetting" MayRequire="Ludeon.RimWorld.Anomaly">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_ThingponeStuffRequired</key>
			<defaultValue>250</defaultValue>
			<apply>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="MLRP_Thingpone"]/costStuffCount</xpath>
					<value>
						<costStuffCount>{MLRP_ThingponeStuffRequired}</costStuffCount>
					</value>
				</Operation>
			</apply>
		</li>
		
		<!--TWILIGHT SPARKLE: USE OLD TEXTURE-->
		<li Class="XmlExtensions.OptionalPatch">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_UseOldTwilightTexture</key>
			<defaultValue>false</defaultValue>
			<caseTrue>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="PonyPlush_TwilightSparkle"]/graphicData/texPath</xpath>
					<value>
						<texPath>Things/PonyPlush/TwilightSparkle_OLD</texPath>
					</value>
				</Operation>
				
				<Operation Class="PatchOperationFindMod">
					<mods>
						<li>Vanilla Achievements Expanded</li>
					</mods>
					<match Class="PatchOperationReplace">
						<xpath>Defs/AchievementsExpanded.AchievementDef[defName="MLRP_Achievement_TwilightSparkle"]/texPath</xpath>
						<value>
							<texPath>Achievements/BookHorse_OLD</texPath>
						</value>
					</match>
				</Operation>
			</caseTrue>
			<caseFalse>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="PonyPlush_TwilightSparkle"]/graphicData/texPath</xpath>
					<value>
						<texPath>Things/PonyPlush/TwilightSparkle</texPath>
					</value>
				</Operation>
				
				<Operation Class="PatchOperationFindMod">
					<mods>
						<li>Vanilla Achievements Expanded</li>
					</mods>
					<match Class="PatchOperationReplace" MayRequire="vanillaexpanded.achievements">
						<xpath>Defs/AchievementsExpanded.AchievementDef[defName="MLRP_Achievement_TwilightSparkle"]/texPath</xpath>
						<value>
							<texPath>Achievements/BookHorse</texPath>
						</value>
					</match>
				</Operation>
			</caseFalse>
		</li>
		
		<!--PLUSHIE RECYCLING: STUFF GAINED-->
		<li Class="XmlExtensions.UseSetting">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_PlushieRecyclingStuffGain</key>
			<defaultValue>75</defaultValue>
			<apply>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/RecipeDef[defName="MLRP_RecyclePlushies"]/modExtensions/li/reclaimedAmount</xpath>
					<value>
						<reclaimedAmount>{MLRP_PlushieRecyclingStuffGain}</reclaimedAmount>
					</value>
				</Operation>
			</apply>
		</li>
		
		<!--NPC FACTION IS ALWAYS PRESENT IN NEW GAME-->
		<li Class="XmlExtensions.OptionalPatch">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_NPCFactionIsPresentInNewGame</key>
			<defaultValue>false</defaultValue>
			<caseTrue>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/FactionDef[defName="MLRP_NPC_Faction"]/startingCountAtWorldCreation</xpath>
					<value>
						<startingCountAtWorldCreation>1</startingCountAtWorldCreation>
					</value>
				</Operation>
			</caseTrue>
			<caseFalse>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/FactionDef[defName="MLRP_NPC_Faction"]/startingCountAtWorldCreation</xpath>
					<value>
						<startingCountAtWorldCreation>0</startingCountAtWorldCreation>
					</value>
				</Operation>
			</caseFalse>
		</li>
		
		<!--DIAMOND DOG FACTION IS ALWAYS PRESENT IN NEW GAME-->
		<li Class="XmlExtensions.OptionalPatch" MayRequire="Ludeon.RimWorld.Biotech">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_DiamondDogFactionIsPresentInNewGame</key>
			<defaultValue>false</defaultValue>
			<caseTrue>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/FactionDef[defName="MLRP_DiamondDog_Faction"]/startingCountAtWorldCreation</xpath>
					<value>
						<startingCountAtWorldCreation>1</startingCountAtWorldCreation>
					</value>
				</Operation>
			</caseTrue>
			<caseFalse>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/FactionDef[defName="MLRP_DiamondDog_Faction"]/startingCountAtWorldCreation</xpath>
					<value>
						<startingCountAtWorldCreation>0</startingCountAtWorldCreation>
					</value>
				</Operation>
			</caseFalse>
		</li>
		
		<!--BATPONY FACTION IS ALWAYS PRESENT IN NEW GAME-->
		<li Class="XmlExtensions.OptionalPatch" MayRequire="sarg.alphagenes">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_BatponyFactionIsPresentInNewGame</key>
			<defaultValue>false</defaultValue>
			<caseTrue>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/FactionDef[defName="MLRP_Batpony_Faction"]/startingCountAtWorldCreation</xpath>
					<value>
						<startingCountAtWorldCreation>1</startingCountAtWorldCreation>
					</value>
				</Operation>
			</caseTrue>
			<caseFalse>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/FactionDef[defName="MLRP_Batpony_Faction"]/startingCountAtWorldCreation</xpath>
					<value>
						<startingCountAtWorldCreation>0</startingCountAtWorldCreation>
					</value>
				</Operation>
			</caseFalse>
		</li>
		
		<!--TREE HUGGER: STUFF REQUIRED-->
		<li Class="XmlExtensions.UseSetting">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_TreeHuggerStuffRequired</key>
			<defaultValue>200</defaultValue>
			<apply>
				<Operation Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="MLRP_TreeHugger"]/costStuffCount</xpath>
					<value>
						<costStuffCount>{MLRP_TreeHuggerStuffRequired}</costStuffCount>
					</value>
				</Operation>
			</apply>
		</li>
		
		<!--BIOTECH: XENOTYPES HAVE DRUG DEPENDENCIES-->
		<li Class="XmlExtensions.OptionalPatch" MayRequire="Ludeon.RimWorld.Biotech">
			<modId>geodesicdragon.rimpony</modId>
			<key>MLRP_BiotechXenotypesNeedDrugs</key>
			<defaultValue>false</defaultValue>
			<caseTrue>
				
				<!--UNICORN-->
				
				<Operation Class="XmlExtensions.HybridPatch">
					<xpath>Defs/XenotypeDef[defName="MLRP_Xeno_Unicorn"]</xpath>
					<value>
						<description Operation="Replace">This xenotype is one of several that was created by a group calling itself the 'Equestrian Integration Society.' Their goal was to create xenotypes based on the many races that inhabit Equestria, but the end results turned out to be much different than they expected.\n\nUnicorns are very smart, exceptionally calm, and stop bleeding quickly. They are fast learners, but terrible at manual labour tasks such as mining.\n\nFurthermore, a side effect of the xenogerm creation process has left them dependent on wake-up to keep going.</description>
						<descriptionShort Operation="Replace">Unicorns excel at research and medicine, but struggle with more manual skills. They are calm, fast learners with a dependence on wake-up.</descriptionShort>
						<genes Operation="Replace">
							<li>Superclotting</li>
							<li>Headbone_CenterHorn</li>
							<li>Aggression_DeadCalm</li>
							<li>Learning_Fast</li>
							<li>AptitudeTerrible_Construction</li>
							<li>AptitudeTerrible_Mining</li>
							<li>AptitudeTerrible_Plants</li>
							<li>AptitudeTerrible_Animals</li>
							<li>AptitudeRemarkable_Intellectual</li>
							<li>AptitudeRemarkable_Medicine</li>
							<li>ChemicalDependency_WakeUp</li>
							<li>Jaw_Baseline</li>
							<li>Ears_Human</li>
							<li>Nose_Human</li>
							<li>MLRP_VoiceHorse</li>
							<li>Hands_Human</li>
							<li>Body_Thin</li>
							<li>Hair_LightBlue</li>
							<li>Hair_LightTeal</li>
							<li>Hair_LightGreen</li>
							<li>Hair_Pink</li>
							<li>Hair_LightPurple</li>
							<li>Hair_BrightRed</li>
							<li>MLRP_BronyGene</li>
						</genes>
					</value>
				</Operation>
				
				<!--PEGASUS-->
				
				<Operation Class="XmlExtensions.HybridPatch">
					<xpath>Defs/XenotypeDef[defName="MLRP_Xeno_Pegasus"]</xpath>
					<value>
						<description Operation="Replace">This xenotype is one of several that was created by a group calling itself the 'Equestrian Integration Society.' Their goal was to create xenotypes based on the many races that inhabit Equestria, but the end results turned out to be much different than they expected.\n\nPegasi excel at combat, but have poor skills in pretty much everything else. They can see in the dark, move very fast, and don't consume any more or less food than baseliners.\n\nHowever, a side effect of the xenogerm implantation process has heightened their aggression levels, which seriously hampers their social abilities, as well as leaving them dependent on regular doses of go-juice.</description>
						<descriptionShort Operation="Replace">Pegasi excel at combat, but struggle with everything else. They are aggressive, fast movers and can see in the dark. They are also dependent on go-juice.</descriptionShort>
						<genes Operation="Replace">
							<li>MoveSpeed_VeryQuick</li>
							<li>Aggression_HyperAggressive</li>
							<li>MeleeDamage_Strong</li>
							<li>DarkVision</li>
							<li>AptitudeRemarkable_Shooting</li>
							<li>AptitudeRemarkable_Melee</li>
							<li>AptitudePoor_Construction</li>
							<li>AptitudePoor_Mining</li>
							<li>AptitudePoor_Cooking</li>
							<li>AptitudePoor_Plants</li>
							<li>AptitudePoor_Animals</li>
							<li>AptitudePoor_Crafting</li>
							<li>AptitudePoor_Artistic</li>
							<li>AptitudeRemarkable_Medicine</li>
							<li>AptitudeTerrible_Social</li>
							<li>AptitudePoor_Intellectual</li>
							<li>ChemicalDependency_GoJuice</li>
							<li>Jaw_Baseline</li>
							<li>Ears_Human</li>
							<li>Nose_Human</li>
							<li>MLRP_VoiceHorse</li>
							<li>Hands_Human</li>
							<li>Body_Thin</li>
							<li>Hair_LightBlue</li>
							<li>Hair_LightTeal</li>
							<li>Hair_LightGreen</li>
							<li>Hair_Pink</li>
							<li>Hair_LightPurple</li>
							<li>Hair_BrightRed</li>
							<li>MLRP_BronyGene</li>
						</genes>
					</value>
				</Operation>
				
				<!--DIAMOND DOG-->
				
				<Operation Class="XmlExtensions.HybridPatch">
					<xpath>Defs/XenotypeDef[defName="MLRP_Xeno_DiamondDog"]</xpath>
					<value>
						<description Operation="Replace">This xenotype is one of several that was created by a group calling itself the 'Equestrian Integration Society.' Their goal was to create xenotypes based on the many races that inhabit Equestria, but the end results turned out to be much different than they expected.\n\nDiamond Dogs are exceptional miners who thrive in the underground parts of the world, where they have developed strong stomachs, super strong immunity, a complete disregard for psychic phenomena, and a lowered need to sleep. A lifetime spent underground has built up their resistances to varying levels of cold and heat, though side effects of the xenogerm implantation process include a heightened level of aggression, as well as a poison joke dependency.</description>
						<descriptionShort Operation="Replace">Diamond Dogs are exceptional miners with strong stomachs and immune systems, total immunity to psychic phenomena, and a less frequent need for rest. They are also resistant to cold and heat, but highly aggressive and dependent on regular doses of poison joke.</descriptionShort>
						<genes Operation="Replace">
							<li>StrongStomach</li>
							<li>Immunity_SuperStrong</li>
							<li>PsychicAbility_Deaf</li>
							<li>MinTemp_LargeDecrease</li>
							<li>MaxTemp_LargeIncrease</li>
							<li>Aggression_HyperAggressive</li>
							<li>LowSleep</li>
							<li>Tail_Furry</li>
							<li>Ears_Floppy</li>
							<li>VoiceRoar</li>
							<li>Body_Standard</li>
							<li>Body_Hulk</li>
							<li>DarkVision</li>
							<li>Furskin</li>
							<li>AptitudeTerrible_Shooting</li>
							<li>AptitudeRemarkable_Mining</li>
							<li>AptitudeTerrible_Crafting</li>
							<li>AptitudeTerrible_Medicine</li>
							<li>ChemicalDependency_MLRP_PoisonJoke</li>
						</genes>
					</value>
				</Operation>
			</caseTrue>
			<caseFalse>
			
				<!--UNICORN-->
				
				<Operation Class="XmlExtensions.HybridPatch">
					<xpath>Defs/XenotypeDef[defName="MLRP_Xeno_Unicorn"]</xpath>
					<value>
						<description Operation="Replace">This xenotype is one of several that was created by a group calling itself the 'Equestrian Integration Society.' Their goal was to create xenotypes based on the many races that inhabit Equestria, but the end results turned out to be much different than they expected.\n\nUnicorns are very smart, exceptionally calm, and stop bleeding quickly. They are fast learners, but terrible at manual labour tasks such as mining.</description>
						<descriptionShort Operation="Replace">Unicorns are calm, fast learners who excel at research and medicine, but struggle with more manual skills.</descriptionShort>
						<genes Operation="Replace">
							<li>Superclotting</li>
							<li>Headbone_CenterHorn</li>
							<li>Aggression_DeadCalm</li>
							<li>Learning_Fast</li>
							<li>AptitudeTerrible_Construction</li>
							<li>AptitudeTerrible_Mining</li>
							<li>AptitudeTerrible_Plants</li>
							<li>AptitudeTerrible_Animals</li>
							<li>AptitudeRemarkable_Intellectual</li>
							<li>AptitudeRemarkable_Medicine</li>
							<li>Jaw_Baseline</li>
							<li>Ears_Human</li>
							<li>Nose_Human</li>
							<li>MLRP_VoiceHorse</li>
							<li>Hands_Human</li>
							<li>Body_Thin</li>
							<li>Hair_LightBlue</li>
							<li>Hair_LightTeal</li>
							<li>Hair_LightGreen</li>
							<li>Hair_Pink</li>
							<li>Hair_LightPurple</li>
							<li>Hair_BrightRed</li>
							<li>MLRP_BronyGene</li>
						</genes>
					</value>
				</Operation>
				
				<!--PEGASUS-->
				
				<Operation Class="XmlExtensions.HybridPatch">
					<xpath>Defs/XenotypeDef[defName="MLRP_Xeno_Pegasus"]</xpath>
					<value>
						<description Operation="Replace">This xenotype is one of several that was created by a group calling itself the 'Equestrian Integration Society.' Their goal was to create xenotypes based on the many races that inhabit Equestria, but the end results turned out to be much different than they expected.\n\nPegasi excel at combat, but have poor skills in pretty much everything else. They can see in the dark, move very fast, and don't consume any more or less food than baseliners.\n\nHowever, a side effect of the xenogerm implantation process has heightened their aggression levels, which seriously hampers their social abilities.</description>
						<descriptionShort Operation="Replace">Pegasi excel at combat, but struggle with everything else. They are aggressive, fast movers who perform well in melee and can see in the dark.</descriptionShort>
						<genes Operation="Replace">
							<li>MoveSpeed_VeryQuick</li>
							<li>Aggression_HyperAggressive</li>
							<li>MeleeDamage_Strong</li>
							<li>DarkVision</li>
							<li>AptitudeRemarkable_Shooting</li>
							<li>AptitudeRemarkable_Melee</li>
							<li>AptitudePoor_Construction</li>
							<li>AptitudePoor_Mining</li>
							<li>AptitudePoor_Cooking</li>
							<li>AptitudePoor_Plants</li>
							<li>AptitudePoor_Animals</li>
							<li>AptitudePoor_Crafting</li>
							<li>AptitudePoor_Artistic</li>
							<li>AptitudeRemarkable_Medicine</li>
							<li>AptitudeTerrible_Social</li>
							<li>AptitudePoor_Intellectual</li>
							<li>Jaw_Baseline</li>
							<li>Ears_Human</li>
							<li>Nose_Human</li>
							<li>MLRP_VoiceHorse</li>
							<li>Hands_Human</li>
							<li>Body_Thin</li>
							<li>Hair_LightBlue</li>
							<li>Hair_LightTeal</li>
							<li>Hair_LightGreen</li>
							<li>Hair_Pink</li>
							<li>Hair_LightPurple</li>
							<li>Hair_BrightRed</li>
							<li>MLRP_BronyGene</li>
						</genes>
					</value>
				</Operation>
				
				<!--DIAMOND DOG-->
				
				<Operation Class="XmlExtensions.HybridPatch">
					<xpath>Defs/XenotypeDef[defName="MLRP_Xeno_DiamondDog"]</xpath>
					<value>
						<description Operation="Replace">This xenotype is one of several that was created by a group calling itself the 'Equestrian Integration Society.' Their goal was to create xenotypes based on the many races that inhabit Equestria, but the end results turned out to be much different than they expected.\n\nDiamond Dogs are exceptional miners who thrive in the underground parts of the world, where they have developed strong stomachs, super strong immunity, a complete disregard for psychic phenomena, and a lowered need to sleep. A lifetime spent underground has built up their resistances to varying levels of cold and heat, though a side effect of the xenogerm implantation process has resulted in a heightened level of aggression.</description>
						<descriptionShort Operation="Replace">Diamond Dogs are exceptional miners with strong stomachs and immune systems, total immunity to psychic phenomena, and a less frequent need for rest. They are also resistant to cold and heat, but highly aggressive.</descriptionShort>
						<genes Operation="Replace">
							<li>StrongStomach</li>
							<li>Immunity_SuperStrong</li>
							<li>PsychicAbility_Deaf</li>
							<li>MinTemp_LargeDecrease</li>
							<li>MaxTemp_LargeIncrease</li>
							<li>Aggression_HyperAggressive</li>
							<li>LowSleep</li>
							<li>Tail_Furry</li>
							<li>Ears_Floppy</li>
							<li>VoiceRoar</li>
							<li>Body_Standard</li>
							<li>Body_Hulk</li>
							<li>DarkVision</li>
							<li>Furskin</li>
							<li>AptitudeTerrible_Shooting</li>
							<li>AptitudeRemarkable_Mining</li>
							<li>AptitudeTerrible_Crafting</li>
							<li>AptitudeTerrible_Medicine</li>
						</genes>
					</value>
				</Operation>
			</caseFalse>
		</li>
	</operations>
</Operation>

</Patch>